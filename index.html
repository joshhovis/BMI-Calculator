<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>BMI Calculator</title>
        <link rel="stylesheet" href="app.css" />
    </head>
    <body>
        <div class="hero">
            <h1 class="hero-title">Body Mass Index Calculator</h1>
            <p class="hero-description">
                Better understand your weight in relation to your height using
                our body mass index (BM) calculator. While BMI is not the sole
                determinant of a healthy weight, it offers a valuable starting
                point to evaluate your overall health and well-being.
            </p>
            <div class="hero-input">
                <h2 class="hero-input-header">Enter your details below</h2>
                <div class="radio-group">
                    <label class="radio-button"
                        ><input type="radio" name="radio" value="1" checked />
                        Metric <span></span
                    ></label>
                    <label class="radio-button"
                        ><input type="radio" name="radio" value="2" /> Imperial
                        <span></span
                    ></label>
                </div>

                <div class="input-group">
                    <label class="input-group-height">
                        Height
                        <div class="metric-input">
                            <input
                                class="input-height"
                                type="text"
                                name="height"
                            />
                            <span class="unit height-unit" id="centimeter"
                                >cm</span
                            >
                        </div>
                        <div class="imperial-input" style="display: none">
                            <div class="imperial-height-input">
                                <input
                                    class="input-feet"
                                    type="text"
                                    name="feet"
                                />
                                <span class="height-unit" id="feet">ft</span>
                            </div>
                            <div class="imperial-height-input">
                                <input
                                    class="input-inches"
                                    type="text"
                                    name="inches"
                                />
                                <span class="height-unit" id="inches">in</span>
                            </div>
                        </div>
                    </label>

                    <label class="input-group-weight">
                        Weight
                        <div class="metric-input">
                            <input
                                class="input-weight"
                                type="text"
                                name="weight"
                            />
                            <span class="unit weight-unit" id="kilogram"
                                >kg</span
                            >
                        </div>
                        <div class="imperial-input" style="display: none">
                            <div class="imperial-weight-input">
                                <input
                                    class="input-stones"
                                    type="text"
                                    name="stones"
                                />
                                <span class="unit weight-unit" id="stones"
                                    >st</span
                                >
                            </div>
                            <div class="imperial-weight-input">
                                <input
                                    class="input-pounds"
                                    type="text"
                                    name="pounds"
                                />
                                <span class="unit weight-unit" id="pounds"
                                    >lbs</span
                                >
                            </div>
                        </div>
                    </label>
                </div>

                <div class="input-results">
                    <h2 class="input-results-header">Welcome!</h2>
                    <p class="input-results-description">
                        Enter your height and weight and you'll see your BMI
                        result here
                    </p>
                </div>
            </div>
        </div>

        <script>
            document.addEventListener("DOMContentLoaded", () => {
                const radioButtons =
                    document.querySelectorAll("input[name=radio]");
                const resultsHeader = document.querySelector(
                    ".input-results-header"
                );
                const resultsDescription = document.querySelector(
                    ".input-results-description"
                );
                const heightInput = document.querySelector(".input-height");
                const weightInput = document.querySelector(".input-weight");
                const feetInput = document.querySelector(".input-feet");
                const inchesInput = document.querySelector(".input-inches");
                const stonesInput = document.querySelector(".input-stones");
                const poundsInput = document.querySelector(".input-pounds");
                const metricInputs = document.querySelectorAll(".metric-input");
                const imperialInputs =
                    document.querySelectorAll(".imperial-input");

                function calculateBMI() {
                    const selectedUnit = document.querySelector(
                        'input[name="radio"]:checked'
                    ).value;
                    let height, weight, bmi;

                    if (selectedUnit === "1") {
                        // Metric
                        height = parseFloat(heightInput.value);
                        weight = parseFloat(weightInput.value);

                        // Return error message if user does not enter a number
                        if (isNaN(height) || isNaN(weight)) {
                            resultsDescription.textContent =
                                "Please enter a valid height and weight";
                            return;
                        }

                        bmi = (weight / height ** 2) * 10000;
                    } else {
                        // imperial
                        const feet = parseFloat(feetInput.value);
                        const inches = parseFloat(inchesInput.value);
                        const stones = parseFloat(stonesInput.value);
                        const pounds = parseFloat(poundsInput.value);

                        if (
                            isNaN(feet) ||
                            isNaN(inches) ||
                            isNaN(stones) ||
                            isNaN(pounds)
                        ) {
                            resultsDescription.textContent =
                                "Please enter a valid height and weight";
                            return;
                        }

                        height = feet * 12 + inches;
                        weight = stones * 14 + pounds;
                        bmi = (weight / height ** 2) * 703;
                    }

                    resultsHeader.innerHTML = `
                    Your BMI is... <span class="bmi">${bmi.toFixed(1)}</span>`;
                    resultsDescription.innerHTML = `
                        Your BMI suggests you're a healthy weight. Your ideal weight is between <span class="weight-range">63.3kgs - 85.2kgs</span>.
                    `;
                }

                radioButtons.forEach((radio) => {
                    radio.addEventListener("change", () => {
                        if (radio.value === "1") {
                            metricInputs.forEach(
                                (input) => (input.style.display = "flex")
                            );
                            imperialInputs.forEach(
                                (input) => (input.style.display = "none")
                            );
                        } else {
                            metricInputs.forEach(
                                (input) => (input.style.display = "none")
                            );
                            imperialInputs.forEach(
                                (input) => (input.style.display = "flex")
                            );
                        }
                        calculateBMI();
                    });
                });

                heightInput.addEventListener("input", calculateBMI);
                weightInput.addEventListener("input", calculateBMI);
                feetInput.addEventListener("input", calculateBMI);
                inchesInput.addEventListener("input", calculateBMI);
                stonesInput.addEventListener("input", calculateBMI);
                poundsInput.addEventListener("input", calculateBMI);
            });
        </script>
    </body>
</html>
